---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<"div">{
	label: string;
  id?: string;
	icon?: string;
  tab_class?: string;
}

const {label, id = label.replace(/\s+/g, '-').toLowerCase(), icon, tab_class = '', ...attr} = Astro.props;

if (!label) {
	throw new Error('Missing prop `label` on `<TabItem>` component.');
}

const tab_id = `tab-panel-${id}`;
const aria_labelledby = `tab-${id}`;
---
<div 
  data-tabitem
  data-label={label}
  data-icon={icon}
  data-tab-class={tab_class}
  id={tab_id}
  aria-labelledby={aria_labelledby}
  aria-role="tabpanel"
  role="tabpanel" 
  class="tab__item"
  {...attr}>

  <slot />
</div>

<style>
  [aria-role="tabpanel"][hidden] {
    opacity: 0;
    animation: fadeIn .5s ease-in-out;
  }

  [aria-role="tabpanel"] {
    opacity: 1;
    animation: fadeIn .5s ease-in-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>
---
const { breakpoint = 60, gap = 2 } = Astro.props;
const gutter: string = gap + 'rem';
const threshold: string = breakpoint + 'rem';
---

<div class="switcher">
  <slot />
</div>

<style is:global define:vars={{ threshold, gutter }}>
  .switcher {
    display: flex;
    flex-wrap: wrap;
    gap: var(--gutter);
  }

  .switcher > * {
    flex-grow: 1;
    flex-basis: calc(((var(--threshold) - 100%) * 999));
  }

.switcher > :nth-last-child(n+4),
.switcher > :nth-last-child(n+4) ~ * {
  flex-basis: 100%;
}
</style>
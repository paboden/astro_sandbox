---
import { getCollection } from 'astro:content';
import Heading from "@components/Base/Heading/Heading.astro";
import Container from "@layouts/Container.astro";
import Layout from "@layouts/Layout.astro";
import BackTo from '@components/Navigation/BackTo/BackTo.astro';
import Link from '@components/Base/Link/Link.astro';

const allTags = await getCollection('blog_tags');
const tags = allTags.map((tag) => ({
    ...tag.data,
  }));

---

<Layout title="Blog Tags" class="max-w-screen-xl mx-auto mt-8">
  
  <BackTo slot="sidebar" href="/blog" title="Return to all blog posts page">Blog posts</BackTo>

  {tags && (
    <div slot="sidebar" class="my-2 sticky top-24 py-2 px-4 bg-gray-100 rounded-md">
      <nav aria-label="Blog navigation" class="my-2">
        <span class="sr-only">Table of Contents</span>
        <ul class="list-none space-y-2 ml-0">
          <li class="list-none items-center text-gray-800 dark:text-gray-200 text-sm">
            <Link variant="link" href="/blog" class="no-underline hover:underline inline-flex items-center">All Posts</Link>
          </li>
          <li class="list-none items-center text-gray-800 dark:text-gray-200 text-sm">
            <Link variant="link" href="/blog/tags" class="no-underline hover:underline inline-flex items-center">All Topics</Link>
          </li>
          <li class="list-none items-center text-gray-800 dark:text-gray-200 text-sm">
            <Link variant="link" href="/blog/authors" class="no-underline hover:underline inline-flex items-center">All Authors</Link>
          </li>
        </ul>
      </nav>
    </div> 
  )}

  <Heading as="h1">Blog tags</Heading>

  <ul class="list list--unstyled my-12">
    {tags.map((tag) => {
      const href = `/blog/tags/${tag.id.replace(/\s+/g, '-').toLowerCase()}`;
      return (
        <li data-number={tag.id} class="list__item mb-6">
          <a class="element_link" href={href}>
            <article class="teaser post_teaser">
              <Heading as="h2" class="element_number">{tag.name}</Heading>
              <p class="element_symbol">{tag.description}</p>
            </article>
          </a>
        </li>
      );
    })}
  </ul>
</Layout>
